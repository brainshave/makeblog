#!/usr/bin/env python
# -*- coding: utf-8 -*-

import sys, re

# read file and split into list of paragraphs
input_text = open(sys.argv[1]).read()
paragraphs = re.split('\n\s*\n', input_text)

# title is technically first paragraph,
# so its posible to have multiline titles,
# or subtitles/abstracts. To be considered.
title = paragraphs[0]

def find_attributes(text):
    """
    Find attributes in text.
    "a: b, c, d" is translated to attribute a with value [b,c,d]
    """
    attributes = {}
    for line in text.splitlines():
        attr = re.split(':\s*', line.strip(), 1)
        attributes[attr[0].strip()] = re.split('\s*,\s*', attr[1])
    return attributes

attributes = find_attributes(paragraphs[1])
if len(attributes) != 0 :
    body = paragraphs[2:]
else:
    body = paragraphs[1:] # when first paragraph isn't attribute map

